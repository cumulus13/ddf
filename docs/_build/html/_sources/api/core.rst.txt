Core API
========

This section documents the core DDF classes and functions.

DDF Class
---------

The main class providing Docker Compose file operations.

.. autoclass:: ddf.DDF
   :members:
   :undoc-members:
   :show-inheritance:

   .. automethod:: __init__
   
   Service Operations
   ~~~~~~~~~~~~~~~~~~
   
   .. automethod:: find_service
      :no-index:

   .. automethod:: list_service_names
      :no-index:

   .. automethod:: get_list_service_names
      :no-index:

   .. automethod:: show_service_detail
      :no-index:
   
   Port Management
   ~~~~~~~~~~~~~~~
   
   .. automethod:: find_duplicate_port
      :no-index:

   .. automethod:: find_port
      :no-index:

   .. automethod:: check_duplicate_port
      :no-index:

   .. automethod:: list_service_ports
      :no-index:
   
   Volume Management
   ~~~~~~~~~~~~~~~~~
   
   .. automethod:: list_service_volumes
      :no-index:

   .. automethod:: list_volumes
      :no-index:
   
   Device Management
   ~~~~~~~~~~~~~~~~~
   
   .. automethod:: list_service_devices
      :no-index:
   
   Hostname Management
   ~~~~~~~~~~~~~~~~~~~
   
   .. automethod:: list_hostnames
      :no-index:
   
   File Operations
   ~~~~~~~~~~~~~~~
   
   .. automethod:: open_file
      :no-index:

   .. automethod:: get_content
      :no-index:
   
   Dockerfile Operations
   ~~~~~~~~~~~~~~~~~~~~~
   
   .. automethod:: get_dockerfile
      :no-index:

   .. automethod:: read_dockerfile
      :no-index:

   .. automethod:: edit_dockerfile
      :no-index:

   .. automethod:: copy_dockerfile
      :no-index:

   .. automethod:: set_dockerfile
      :no-index:
   
   Entrypoint Operations
   ~~~~~~~~~~~~~~~~~~~~~
   
   .. automethod:: read_entrypoint
      :no-index:

   .. automethod:: edit_entrypoint
      :no-index:
   
   Service Editing
   ~~~~~~~~~~~~~~~
   
   .. automethod:: edit_service
      :no-index:

   .. automethod:: edit_file
      :no-index:

   .. automethod:: read_file
      :no-index:
   
   Service Management
   ~~~~~~~~~~~~~~~~~~
   
   .. automethod:: new_service
      :no-index:

   .. automethod:: copy_service
      :no-index:

   .. automethod:: rename_service
      :no-index:

   .. automethod:: duplicate_server
      :no-index:

   .. automethod:: remove_service
      :no-index:

   .. automethod:: copy_dockerfile_config
      :no-index:

EnhancedDDF Class
-----------------

Enhanced version with backup and monitoring support.

.. autoclass:: ddf.EnhancedDDF
   :members:
   :undoc-members:
   :show-inheritance:
   
   .. automethod:: edit_service_enhanced
      :no-index:

   .. automethod:: edit_dockerfile_enhanced
      :no-index:

   .. automethod:: edit_entrypoint_enhanced
      :no-index:

   .. automethod:: remove_service_enhanced
      :no-index:

Usage Class
-----------

Main CLI interface handler.

.. autoclass:: ddf.Usage
   :members:
   :undoc-members:
   :show-inheritance:
   
   .. automethod:: usage
      :no-index:

Utility Functions
-----------------

Helper functions for common operations.

.. autofunction:: ddf.validate_service_name
   :no-index:

.. autofunction:: ddf.safe_subprocess_run
   :no-index:

.. autofunction:: ddf.write_hash
   :no-index:

.. autofunction:: ddf.get_hash_from_file
   :no-index:

.. autofunction:: ddf.compare_hash
   :no-index:

Decorators
----------

.. autofunction:: ddf.cache_with_invalidation

   Decorator for caching with smart invalidation.
   
   :param ttl: Time to live in seconds
   :param key_prefix: Prefix for cache key
   :param invalidate_on: List of patterns to invalidate
   :param validation: Function to check if backend changed
   :return: Decorated function

Constants
---------

.. data:: ddf.CONFIGFILE
   
   Path to the configuration file.

.. data:: ddf.CONFIG
   
   Global configuration object.

.. data:: ddf.CACHE
   
   Global cache manager instance.

.. data:: ddf.CACHE_CONFIG
   
   Global cache configuration.